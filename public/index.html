<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IntelliMen - 53 Desafios Para Homens Inteligentes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #000000 0%, #333333 100%);
            color: #333;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #333333 100%);
            color: white;
            padding: 30px 0;
            margin-bottom: 40px;
            position: relative;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255,255,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255,255,255,0.05) 0%, transparent 50%);
            z-index: 1;
        }

        .header-content {
            position: relative;
            z-index: 2;
            text-align: center;
            max-width: 800px;
            padding: 0 20px;
        }

        .header-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            gap: 15px;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #000;
            font-size: 14px;
        }

        .header-brand {
            font-size: 2.5rem;
            font-weight: 900;
            letter-spacing: 2px;
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 300;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }

        .header-subtitle {
            font-size: 1rem;
            color: #ddd;
            font-style: italic;
            margin-top: 5px;
        }

        .auth-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid #f0f0f0;
        }

        .auth-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 1.1rem;
            color: #666;
            transition: all 0.3s ease;
        }

        .auth-tab.active {
            color: #000;
            border-bottom: 3px solid #000;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #000;
        }

        .btn {
            background: linear-gradient(135deg, #000000 0%, #333333 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            width: 100%;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            box-sizing: border-box;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: white;
            color: #000;
            border: 2px solid #000;
            width: auto;
            min-width: 100px;
            font-size: 0.9rem;
            padding: 10px 15px;
            white-space: nowrap;
        }

        .btn-secondary:hover {
            background: #f0f0f0;
        }

        .manifesto-btn {
            background: #333;
            color: white;
            border: 2px solid #333;
            width: auto;
            padding: 10px 25px;
            margin-top: 20px;
        }

        .manifesto-btn:hover {
            background: #555;
            border-color: #555;
        }

        .dashboard {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .dashboard.active {
            display: block;
        }

        .user-info {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #000;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 20px;
        }

        .user-info .buttons {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .user-info .buttons .btn {
            width: auto;
            min-width: 100px;
            font-size: 0.9rem;
            padding: 10px 15px;
            white-space: nowrap;
        }

        .user-info h2 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0;
        }

        .user-info .logo-icon {
            width: 20px;
            height: 20px;
            font-size: 10px;
            border-radius: 3px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #000000 0%, #333333 100%);
            transition: width 0.3s ease;
        }

        .challenges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .challenge-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .challenge-card:hover {
            border-color: #000;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .challenge-card.completed {
            border-color: #000;
            background: linear-gradient(135deg, #f8f8f8 0%, #e8e8e8 100%);
        }

        .challenge-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .challenge-number {
            background: #000;
            color: white;
            padding: 8px 15px;
            border-radius: 25px;
            font-weight: bold;
        }

        .challenge-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .challenge-status.pending {
            background: #f0f0f0;
            color: #666;
        }

        .challenge-status.completed {
            background: #000;
            color: #fff;
        }

        .challenge-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .challenge-description {
            color: #666;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .challenge-links {
            margin-top: 15px;
        }

        .challenge-links a {
            display: inline-block;
            background: #f0f0f0;
            color: #333;
            padding: 5px 10px;
            border-radius: 15px;
            text-decoration: none;
            font-size: 0.9rem;
            margin: 5px 5px 5px 0;
            transition: all 0.3s ease;
        }

        .challenge-links a:hover {
            background: #000;
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .modal-header h2 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0;
        }

        .modal-header .logo-icon {
            width: 24px;
            height: 24px;
            font-size: 12px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .export-btn {
            background: #000;
            border: 2px solid #000;
        }

        .export-btn:hover {
            background: #333;
            border-color: #333;
        }

        .logout-btn {
            background: #fff;
            color: #000;
            border: 2px solid #000;
        }

        .logout-btn:hover {
            background: #f0f0f0;
        }

        .notes-section {
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            border: 2px solid #e0e0e0;
        }

        .notes-section h4 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notes-section h4::before {
            content: "üìù";
            font-size: 1.1rem;
        }

        .notes-section textarea {
            width: 100%;
            min-height: 120px;
            resize: vertical;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 1rem;
            line-height: 1.5;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
            box-sizing: border-box;
        }

        .notes-section textarea:focus {
            border-color: #000;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1), 0 0 0 3px rgba(0,0,0,0.1);
            outline: none;
        }

        .notes-section textarea::placeholder {
            color: #999;
            font-style: italic;
        }

        .complete-btn {
            background: #000;
            margin-top: 15px;
        }

        .complete-btn:hover {
            background: #333;
        }

        .lema-section {
            background: linear-gradient(135deg, #000000 0%, #333333 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
            border: 3px solid #000;
        }

        .lema-section h3 {
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .lema-section p {
            font-style: italic;
            line-height: 1.6;
            font-size: 1.1rem;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .loading::before {
            content: "‚è≥";
            font-size: 2rem;
            display: block;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .header {
                min-height: 150px;
                padding: 20px 0;
            }
            
            .header-brand {
                font-size: 1.8rem;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .header-subtitle {
                font-size: 0.9rem;
            }
            
            .auth-section,
            .dashboard {
                padding: 20px;
            }
            
            .challenges-grid {
                grid-template-columns: 1fr;
            }
            
            .user-info {
                flex-direction: column;
                align-items: stretch;
                text-align: center;
            }
            
            .user-info .buttons {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .user-info .buttons .btn {
                min-width: 80px;
                font-size: 0.8rem;
                padding: 8px 12px;
            }
            
            .modal-content {
                width: 95%;
                margin: 10px;
                max-height: 90vh;
            }
        }

        @media (max-width: 480px) {
            .user-info .buttons {
                flex-direction: column;
                width: 100%;
            }
            
            .user-info .buttons .btn {
                width: 100%;
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="header-logo">
                    <div class="logo-icon">
                        IM
                    </div>
                    <div class="header-brand">INTELLIMEN</div>
                </div>
                <h1>PROJETO INTELLIMEN</h1>
                <p>53 Desafios Para Homens Inteligentes</p>
                <div class="header-subtitle">Baseado no livro de Renato Cardoso</div>
                <button class="btn manifesto-btn" onclick="openManifestoModal()">
                    üìñ Ler o Manifesto
                </button>
            </div>
        </div>

        <!-- Se√ß√£o de Autentica√ß√£o -->
        <div class="auth-section" id="authSection">
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="showAuthForm('login')">Login</button>
                <button class="auth-tab" onclick="showAuthForm('register')">Cadastro</button>
            </div>

            <div class="auth-form active" id="loginForm">
                <h2>Fa√ßa seu Login</h2>
                <form onsubmit="login(event)">
                    <div class="form-group">
                        <label for="loginEmail">Email:</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Senha:</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn">Entrar</button>
                </form>
                <p style="margin-top: 15px; text-align: center; color: #666;">
                    <small>üí° Para testar: email: <strong>joao@email.com</strong> | senha: <strong>123456</strong></small>
                </p>
            </div>

            <div class="auth-form" id="registerForm">
                <h2>Cadastro de Novo IntelliMan</h2>
                <form onsubmit="register(event)">
                    <div class="form-group">
                        <label for="registerName">Nome Completo:</label>
                        <input type="text" id="registerName" required>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email:</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Senha:</label>
                        <input type="password" id="registerPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPartner">Nome do Parceiro Oficial:</label>
                        <input type="text" id="registerPartner" placeholder="Deixe em branco se ainda n√£o tiver">
                    </div>
                    <button type="submit" class="btn">Cadastrar</button>
                </form>
            </div>
        </div>

        <!-- Dashboard -->
        <div class="dashboard" id="dashboard">
            <div class="user-info">
                <div>
                    <h2>
                        <div class="logo-icon">IM</div>
                        Bem-vindo, <span id="userName"></span>!
                    </h2>
                    <p>Parceiro Oficial: <span id="partnerName">N√£o definido</span></p>
                </div>
                <div class="buttons">
                    <button class="btn export-btn" onclick="exportProgress()">üìÑ Exportar</button>
                    <button class="btn btn-secondary" onclick="openProfileModal()">üë§ Perfil</button>
                    <button class="btn btn-secondary" onclick="openManifestoModal()">üìñ Manifesto</button>
                    <button class="btn logout-btn" onclick="logout()">üö™ Sair</button>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p style="text-align: center; margin-top: 10px;">
                Progresso: <span id="progressText">0/53</span> desafios conclu√≠dos
            </p>

            <div class="lema-section">
                <h3>üéØ Lema do IntelliMan</h3>
                <p>
                    "Um IntelliMan √© um homem inteligente. Ele vence a si mesmo, honra sua mulher e ajuda o seu parceiro. 
                    Se √© dif√≠cil, ele supera. Se √© assustador, ele enfrenta. Se demora, ele persevera. 
                    Conhece o seu valor diante dos homens e de Deus. Ama a disciplina, o car√°ter e o bem. 
                    Sua miss√£o √© inspirar outros a se tornarem IntelliMen."
                </p>
            </div>

            <div class="challenges-grid" id="challengesGrid">
                <!-- Desafios ser√£o carregados aqui -->
            </div>
        </div>
    </div>

    <!-- Modal para Perfil do Usu√°rio -->
    <div class="modal" id="profileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üë§ Perfil do Usu√°rio</h2>
                <button class="close-btn" onclick="closeProfileModal()">&times;</button>
            </div>
            <div style="line-height: 1.6;">
                <h3>üìã Informa√ß√µes Pessoais</h3>
                <form id="profileForm" onsubmit="updateProfile(event)">
                    <div class="form-group">
                        <label for="profileName">Nome Completo:</label>
                        <input type="text" id="profileName" required>
                    </div>
                    <div class="form-group">
                        <label for="profileEmail">Email:</label>
                        <input type="email" id="profileEmail" required readonly style="background: #f5f5f5;">
                        <small style="color: #666;">O email n√£o pode ser alterado</small>
                    </div>
                    <div class="form-group">
                        <label for="profilePartner">Parceiro Oficial:</label>
                        <input type="text" id="profilePartner" placeholder="Nome do seu parceiro oficial">
                    </div>
                    <button type="submit" class="btn">üíæ Atualizar Dados</button>
                </form>
                
                <hr style="margin: 30px 0;">
                
                <h3>üìä Estat√≠sticas do Progresso</h3>
                <div id="profileStats" style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                    <!-- Estat√≠sticas ser√£o carregadas aqui -->
                </div>
                
                <hr style="margin: 30px 0;">
                
                <h3>üîí Seguran√ßa</h3>
                <button class="btn btn-secondary" onclick="changePassword()" style="width: 100%; margin: 10px 0;">
                    üîë Alterar Senha
                </button>
                
                <h3 style="margin-top: 30px;">‚ö†Ô∏è Zona de Perigo</h3>
                <button class="btn" onclick="resetProgress()" style="background: #dc3545; width: 100%; margin: 10px 0;">
                    üóëÔ∏è Resetar Todo o Progresso
                </button>
                <small style="color: #666; font-style: italic;">Esta a√ß√£o n√£o pode ser desfeita!</small>
            </div>
        </div>
    </div>

    <!-- Modal para Manifesto -->
    <div class="modal" id="manifestoModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2>üìú Manifesto do IntelliMen</h2>
                <button class="close-btn" onclick="closeManifestoModal()">&times;</button>
            </div>
            <div id="manifestoContent" style="max-height: 60vh; overflow-y: auto; line-height: 1.6;">
                <h3>MANIFESTO</h3>
                <p>Ser homem antigamente era algo muito simples. Voc√™ aprendia duas coisas desde cedo: lutar para se defender e ca√ßar para se alimentar. Quem fazia isso muito bem, se dava muito bem. E levava a garota para casa.</p>
                
                <p>Esse era o crit√©rio b√°sico quando o pai considerava um rapaz para casar com sua filha. E ela tamb√©m. Em muitos casos, amor era secund√°rio. Voc√™ n√£o ouvia mulheres detalhando uma longa lista de atributos que queriam no futuro marido.</p>
                
                <p>A √∫nica preocupa√ß√£o era: "Voc√™ pode e est√° pronto para me proteger com a sua vida? Pode me sustentar t√£o bem quanto ou melhor que o meu pai? Ent√£o ponha um anel aqui..." Simples assim.</p>
                
                <p><strong>Ser homem no s√©culo 21 j√° √© outra hist√≥ria.</strong> O mundo mudou. As mulheres mudaram. E muitos homens ainda est√£o com a cabe√ßa l√° atr√°s. O resultado est√° a√≠ para ser assistido em 3D: homens <strong>Deslocados, Despreparados e Desacreditados</strong>.</p>
                
                <hr style="margin: 20px 0;">
                
                <h3>APRESENTANDO O INTELLIMEN</h3>
                <p>Voc√™ j√° deve ter sacado que o nome do projeto √© uma jun√ß√£o das palavras em ingl√™s <em>intelligent</em> (inteligentes) e <em>men</em> (homens). Escolhemos esse nome porque, al√©m de soar como um super-her√≥i (que todo homem secretamente aspira ser desde crian√ßa), ele engloba tudo a que o projeto aspira: <strong>formar homens inteligentes e melhores em tudo</strong>.</p>
                
                <p>Formar homens melhores ser√° o nosso lema. Ser homens inteligentes √© a nossa miss√£o. Vamos caminhar juntos, aprender uns com os outros. Mas espere <strong>DESAFIOS</strong>. N√≥s vamos desafi√°-lo a ser melhor em todas as √°reas de sua vida.</p>
                
                <p>E para ser um dos IntelliMen, voc√™ nunca poder√° fugir dos desafios nem deixar de cumpri-los. E acima de tudo, precisar√° do ingrediente fundamental para aprender: <strong>humildade</strong>.</p>
                
                <blockquote style="background: #f5f5f5; padding: 15px; border-left: 4px solid #333; margin: 20px 0; font-style: italic;">
                    "O homem n√£o prevalece pela for√ßa." - 1 Samuel 2.9
                </blockquote>
                
                <p>√â preciso mais que m√∫sculos para ser homem. <strong>Car√°ter, intelig√™ncia e f√© s√£o muito mais importantes.</strong></p>
                
                <hr style="margin: 20px 0;">
                
                <h3>PERGUNTAS B√ÅSICAS</h3>
                
                <h4>O QUE √â O INTELLIMEN?</h4>
                <p>√â um grupo exclusivamente para homens que querem ser melhores em todas as √°reas de sua vida. Homens ajudando homens, compartilhando o que √© bom, trabalhando duro para melhorar a cada dia ‚Äî e se divertindo enquanto o fazem.</p>
                
                <h4>QUEM PODE PARTICIPAR?</h4>
                <p>Homens de qualquer idade que estejam dispostos a se submeterem ao nosso Manifesto e √†s Condi√ß√µes de Participa√ß√£o.</p>
                
                <h4>COMO POSSO PARTICIPAR?</h4>
                <p>Ler todo este Manifesto com aten√ß√£o, entender as condi√ß√µes, comprometer-se com o projeto, e cumprir os desafios semanais apresentados aqui no IntelliMen.</p>
                
                <h4>QUANDO COME√áA?</h4>
                <p>Agora, j√°. Se voc√™ est√° comprometido em se tornar um homem melhor, voc√™ pode iniciar o projeto imediatamente. Ser√£o <strong>53 desafios, um por semana</strong>. Ser√° um ano de comprometimento com voc√™ mesmo para transformar sua vida.</p>
                
                <hr style="margin: 20px 0;">
                
                <h3>üéØ LEMA DO INTELLIMAN</h3>
                <div style="background: linear-gradient(135deg, #000000 0%, #333333 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <p style="font-size: 1.1rem; margin: 0;"><em>"Um IntelliMan √© um homem inteligente. Ele vence a si mesmo, honra sua mulher e ajuda o seu parceiro. Se √© dif√≠cil, ele supera. Se √© assustador, ele enfrenta. Se demora, ele persevera. Conhece o seu valor diante dos homens e de Deus. Ama a disciplina, o car√°ter e o bem. Sua miss√£o √© inspirar outros a se tornarem IntelliMen."</em></p>
                </div>
                
                <hr style="margin: 20px 0;">
                
                <h3>CONDI√á√ïES DE PARTICIPA√á√ÉO</h3>
                <ol style="line-height: 1.6; margin-left: 20px;">
                    <li><strong>Compromisso Total:</strong> Voc√™ deve estar disposto a fazer todos os 53 desafios, sem exce√ß√£o.</li>
                    <li><strong>Parceiro Oficial:</strong> Voc√™ deve encontrar um parceiro para fazer o projeto junto.</li>
                    <li><strong>Transpar√™ncia:</strong> Compartilhar seu progresso e aprendizados.</li>
                    <li><strong>Persist√™ncia:</strong> N√£o desistir, mesmo quando os desafios ficarem dif√≠ceis.</li>
                    <li><strong>Integridade:</strong> Ser honesto consigo mesmo e com seu progresso.</li>
                </ol>
                
                <p style="text-align: center; margin-top: 30px;"><strong>Est√° pronto para se tornar um IntelliMan?</strong></p>
            </div>
        </div>
    </div>

    <!-- Modal para Desafios -->
    <div class="modal" id="challengeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle"></h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalContent"></div>
            <div class="notes-section">
                <h4>Suas Anota√ß√µes Pessoais</h4>
                <textarea id="challengeNotes" placeholder="‚úçÔ∏è Compartilhe suas reflex√µes, aprendizados e experi√™ncias com este desafio...

üí° Dicas:
‚Ä¢ Como voc√™ se sentiu fazendo este desafio?
‚Ä¢ Quais dificuldades encontrou?
‚Ä¢ O que aprendeu sobre si mesmo?
‚Ä¢ Como vai aplicar isso no dia a dia?
‚Ä¢ Que decis√µes tomou em decorr√™ncia deste desafio?"></textarea>
                <button class="btn complete-btn" onclick="completeChallenge()">Salvar e Marcar como Conclu√≠do</button>
            </div>
        </div>
    </div>

    <script>
        // Configura√ß√£o da API - AUTO DETECTA AMBIENTE
        const API_BASE_URL = window.location.origin;
        
        // Vari√°veis globais
        let currentUser = null;

        // Dados completos dos 53 desafios do IntelliMen
        const challenges = [
            {
                id: 1,
                title: "Encontrar um Parceiro Oficial",
                description: "Encontrar um parceiro para fazer o projeto com voc√™ e tornar p√∫blica sua participa√ß√£o.",
                details: "Voc√™ vai convidar algu√©m para come√ßar o Projeto IntelliMen com voc√™. Pode ser um amigo, irm√£o, colega no trabalho ou na igreja, primo, seu pai, seu filho, seu pastor etc. Escolha algu√©m legal, que vai levar o projeto a s√©rio e n√£o deix√°-lo na m√£o no meio do caminho.",
                links: [
                    { text: "üåê P√°gina oficial do IntelliMen", url: "https://facebook.com/intellimen" },
                    { text: "üê¶ Twitter do IntelliMen", url: "https://twitter.com/intellimen27" }
                ]
            },
            {
                id: 2,
                title: "Identificar Tr√™s Coisas para Melhorar",
                description: "Identificar tr√™s coisas que voc√™ precisa melhorar sobre si mesmo com urg√™ncia.",
                details: "Todos n√≥s temos que melhorar em muitas coisas. Mas n√£o podemos fazer tudo ao mesmo tempo. Por isso voc√™ deve come√ßar com tr√™s √°reas de sua vida onde precisa melhorar com mais urg√™ncia. Pense em coisas que far√£o uma grande diferen√ßa na sua vida, o mais r√°pido poss√≠vel."
            },
            {
                id: 3,
                title: "Descobrir Suas Qualidades",
                description: "Descobrir as suas qualidades principais.",
                details: "Sua tarefa neste desafio ser√° escrever todas as suas qualidades como pessoa. No desafio anterior, buscamos onde precisamos melhorar, mas neste desafio vamos focar nas qualidades que j√° temos, onde j√° somos bons e competentes."
            },
            {
                id: 4,
                title: "Tempo com Familiar",
                description: "Reservar tempo com um familiar fazendo algo de que ele goste.",
                details: "IntelliMen s√£o voltados para suas fam√≠lias. Voc√™ vai tirar um tempo para fazer algo com ele ou por ele, algo de que ele goste. Pode ser sua esposa, sua m√£e, seu pai, irm√£o, av√¥, irm√£, filho ‚Äî enfim, uma pessoa que v√° apreciar seu gesto e tempo."
            },
            {
                id: 5,
                title: "S√©rie 'Seja Homem!'",
                description: "Assistir √† s√©rie de v√≠deos 'Seja Homem!' e refletir sobre seu papel como homem.",
                details: "Voc√™ vai assistir √† s√©rie de cinco v√≠deos sobre como ser homem nos dias de hoje. Cada v√≠deo dever√° ser acompanhado de anota√ß√µes sobre o que voc√™ aprendeu e as decis√µes que tomar√°.",
                links: [
                    { text: "üé• Assistir √† s√©rie Seja Homem!", url: "http://rna.to/UtVFqR" }
                ]
            },
            {
                id: 6,
                title: "Revis√£o e Divulga√ß√£o",
                description: "Rever os resultados dos primeiros 5 desafios e falar do projeto com algu√©m.",
                details: "Passado um m√™s do in√≠cio do Projeto, √© hora de uma revis√£o. Voc√™ vai rever o que fez, avaliar os resultados e compartilhar com algu√©m o que tem sido bom para voc√™ no IntelliMen."
            },
            {
                id: 7,
                title: "Definir Objetivos Inteligentes",
                description: "Aprender a definir objetivos inteligentemente e colocar em pr√°tica.",
                details: "Voc√™ vai aprender sobre objetivos TRACQ (Tem prazo, Relevante, Alcan√ß√°vel, Claro e espec√≠fico, Quantificado) e definir um objetivo que tenha essas cinco caracter√≠sticas."
            },
            {
                id: 8,
                title: "Encontrar e Dominar",
                description: "Encontrar algo que o esteja dominando e passar a domin√°-lo.",
                details: "O homem foi criado para dominar e n√£o ser dominado por nada. Voc√™ vai identificar as coisas que t√™m lhe dominado e desenvolver estrat√©gias para domin√°-las.",
                links: [
                    { text: "üé• O desafio de ser homem", url: "http://rna.to/1n6xZR7" }
                ]
            },
            {
                id: 9,
                title: "Atitude Ousada e Corajosa",
                description: "Tomar uma atitude ousada e corajosa por uma boa causa.",
                details: "Voc√™ vai procurar algo corajoso e ousado para fazer por uma boa causa. Identifique uma boa causa e pense em algo ousado que voc√™ pode fazer por ela.",
                links: [
                    { text: "üé• Men stealing meat from lions", url: "https://www.youtube.com/watch?v=QDubMeNlSxc" }
                ]
            },
            {
                id: 10,
                title: "Despertar a Raiva Inteligente",
                description: "Despertar sua raiva contra algo errado e us√°-la inteligentemente.",
                details: "Voc√™ vai identificar situa√ß√µes na SUA VIDA que deveriam lhe provocar raiva, mas voc√™ tem sido passivo diante delas. Desperte sua raiva e use-a de forma inteligente.",
                links: [
                    { text: "üìñ A origem da raiva", url: "http://rna.to/1hQTrMy" }
                ]
            },
            {
                id: 11,
                title: "Disciplina de Exerc√≠cios",
                description: "Entrar na disciplina de fazer exerc√≠cio f√≠sico pelo menos tr√™s vezes por semana.",
                details: "O homem inteligente deve ser a imagem da disciplina. Voc√™ vai adotar a disciplina de se exercitar regularmente - no m√≠nimo tr√™s vezes por semana, uma hora por sess√£o."
            },
            {
                id: 12,
                title: "Vigiar os Pensamentos",
                description: "Vigiar seus pensamentos e remover todos os que n√£o lhe fazem bem.",
                details: "Voc√™ vai vasculhar sua mente para identificar pensamentos ruins e ficar atento √† sua voz interior. Ao identificar algo negativo, imediatamente repreenda-o e fale algo positivo.",
                links: [
                    { text: "üé• Como superar os maus pensamentos", url: "http://rna.to/1oeCnCE" }
                ]
            },
            {
                id: 13,
                title: "Ser Mais Cavalheiro",
                description: "Aprender a ser mais cavalheiro e menos cavalo.",
                details: "Voc√™ vai buscar praticar pequenos gestos e h√°bitos de um cavalheiro, tratando bem o seu semelhante, especialmente as mulheres, sem perder a masculinidade."
            },
            {
                id: 14,
                title: "Disciplina Financeira",
                description: "Disciplinar-se em guardar uma quantidade de dinheiro regularmente.",
                details: "Voc√™ vai criar uma disciplina financeira de n√£o gastar todo seu dinheiro, sempre. Considere o princ√≠pio 10-20-70: devolva 10% para Deus, guarde 20% e viva com 70% da sua renda."
            },
            {
                id: 15,
                title: "Disciplina do Todo-Poderoso",
                description: "Reconhecer a disciplina do Todo-Poderoso e aceit√°-la.",
                details: "Voc√™ vai reconhecer a disciplina de Deus na sua vida. Se Ele disciplina a quantos ama, voc√™ deve ser sens√≠vel a essa disciplina e aceit√°-la para seu crescimento."
            },
            {
                id: 16,
                title: "Pacto com os Olhos",
                description: "Fazer um pacto com seus olhos de n√£o cobi√ßar nenhuma mulher.",
                details: "Voc√™ vai treinar os seus olhos a n√£o olhar para mulheres com desejo ou cobi√ßa. Quando perceber que olhou, desvie o olhar imediatamente."
            },
            {
                id: 17,
                title: "Revis√£o dos Desafios",
                description: "Rever todos os desafios at√© aqui e se atualizar no projeto.",
                details: "Foram 16 desafios at√© aqui. Voc√™ vai fazer uma revis√£o completa, lembrando dos aprendizados e se atualizando nos desafios que n√£o completou satisfatoriamente."
            },
            {
                id: 18,
                title: "Ensinar uma Habilidade",
                description: "Ensinar uma habilidade ou outro ensinamento √∫til ao seu parceiro.",
                details: "Voc√™ vai ensinar ao seu Parceiro Oficial algo que voc√™ faz bem e pratica. Pode ser qualquer habilidade ou conhecimento pr√°tico que seja √∫til a ele."
            },
            {
                id: 19,
                title: "Caminhada do Amor",
                description: "Convidar sua esposa/noiva/namorada para fazer a Caminhada do Amor.",
                details: "Voc√™ vai convidar sua amada para fazer a Caminhada do Amor. Se voc√™ √© solteiro, pode convidar algu√©m que tenha em vista ou motivar um casal a fazer.",
                links: [
                    { text: "üíï P√°gina oficial da Caminhada do Amor", url: "http://rna.to/1mI1s2e" },
                    { text: "üòÑ Humor: Precisamos conversar", url: "http://rna.to/1pnsd2l" }
                ]
            },
            {
                id: 20,
                title: "√Årea de Excel√™ncia",
                description: "Descobrir sua √°rea de excel√™ncia e desenvolv√™-la.",
                details: "Voc√™ vai identificar sua √°rea de excel√™ncia e come√ßar a fazer mais para desenvolv√™-la. Todo mundo pode ser excelente em pelo menos uma coisa."
            },
            {
                id: 21,
                title: "Come√ßar como o Rei Davi",
                description: "Come√ßar todos os dias desta semana como o rei Davi.",
                details: "Voc√™ vai se programar para passar alguns minutos diante de Deus em ora√ß√£o ao come√ßar o dia, seguindo o exemplo do rei Davi."
            },
            {
                id: 22,
                title: "Eliminar Mau H√°bito",
                description: "Identificar um mau h√°bito e elimin√°-lo.",
                details: "Voc√™ vai identificar pelo menos um mau h√°bito e elimin√°-lo. Forme h√°bitos bons e sua vida ser√° boa. H√°bitos ruins a destruir√£o.",
                links: [
                    { text: "üìñ Sendo mais esperto que seu h√°bito", url: "http://rna.to/1rBI7l3" },
                    { text: "üìñ Quebrando h√°bitos: habilitadores e acionadores", url: "http://rna.to/1pLU1ek" }
                ]
            },
            {
                id: 23,
                title: "Adotar Bom H√°bito",
                description: "Adotar um novo bom h√°bito.",
                details: "Voc√™ vai definir um bom h√°bito que lhe trar√° bons resultados e desenvolv√™-lo at√© que se torne natural. Normalmente demora de 21 a 40 dias para desenvolver um bom h√°bito."
            },
            {
                id: 24,
                title: "Aprender 'Sim' e 'N√£o'",
                description: "Aprender a dizer 'sim' e 'n√£o' mais corajosamente.",
                details: "Voc√™ vai prestar mais aten√ß√£o aos seus 'sins' e 'n√£os', especialmente os mais importantes. Aprenda a us√°-los corretamente para ter melhores resultados."
            },
            {
                id: 25,
                title: "Desenvolver Maturidade",
                description: "Identificar imaturidade e desenvolver a maturidade.",
                details: "Voc√™ vai avaliar o seu n√≠vel de maturidade e ver onde precisa desenvolv√™-la mais. Ser maduro √© estar bem ajustado √† sua √©poca e situa√ß√£o."
            },
            {
                id: 26,
                title: "Revis√£o e Divulga√ß√£o 2",
                description: "Rever todos os desafios at√© aqui, se atualizar no projeto e divulgar o IntelliMen.",
                details: "Chegou outro momento de reflex√£o. Voc√™ vai revisar seu desempenho desde o desafio 18 e divulgar o projeto de alguma forma extra.",
                links: [
                    { text: "üìñ Onde comprar o livro IntelliMen", url: "https://arcacenter.com.br/livrointellimen" }
                ]
            },
            {
                id: 27,
                title: "Terminar Projeto Abandonado",
                description: "Terminar um projeto que abandonou.",
                details: "Voc√™ vai identificar um projeto, ideia, tarefa ou prop√≥sito que tenha abandonado e dar continuidade at√© termin√°-lo. Homens inteligentes terminam o que come√ßam."
            },
            {
                id: 28,
                title: "Resolver Problema Interessante",
                description: "Resolver um problema interessante ‚Äî seu ou de algu√©m.",
                details: "Voc√™ vai encontrar um problema interessante que voc√™ pode resolver e que vale a pena resolver. Homens s√£o solucionadores de problemas."
            },
            {
                id: 29,
                title: "Ler Livro Edificante",
                description: "Ler um livro edificante nos pr√≥ximos 30 dias.",
                details: "Voc√™ vai escolher e ler um livro edificante dentro de 30 dias. Sabedoria e conhecimento valem mais que m√∫sculos.",
                links: [
                    { text: "üìö Loja de livros recomendados", url: "http://arcacenter.com.br" },
                    { text: "üìû Televendas", url: "tel:+552124610060" }
                ]
            },
            {
                id: 30,
                title: "Usar Negatividade como Combust√≠vel",
                description: "Usar a negatividade dos outros a seu respeito como combust√≠vel para conseguir o que quer.",
                details: "Voc√™ vai identificar algum sonho que foi sufocado pela negatividade dos outros e usar essa negatividade como energia para persegui-lo.",
                links: [
                    { text: "üé¨ Hist√≥ria real de Carl Brashear", url: "https://pt.wikipedia.org/wiki/Homens_de_Honra" }
                ]
            },
            {
                id: 31,
                title: "Peso Saud√°vel",
                description: "Identificar seu peso saud√°vel e ajustar sua alimenta√ß√£o e atividade f√≠sica.",
                details: "Voc√™ vai descobrir como est√° o seu peso e massa corporal e, se necess√°rio, fazer ajustes na alimenta√ß√£o e exerc√≠cios.",
                links: [
                    { text: "üßÆ Calculadora de IMC", url: "http://rna.to/SPRMen" }
                ]
            },
            {
                id: 32,
                title: "Equilibrar Emo√ß√µes",
                description: "Emotivo demais ou de menos? Confronte e equilibre suas emo√ß√µes.",
                details: "Voc√™ vai confrontar seus h√°bitos emocionais, identificar fraquezas e lidar com eles para alcan√ßar o equil√≠brio emocional."
            },
            {
                id: 33,
                title: "Ser Pontual",
                description: "Ser pontual em todos os seus compromissos desta semana (e depois, sempre).",
                details: "Voc√™ vai observar e se programar para n√£o fazer nada atrasado. Pontualidade √© uma das caracter√≠sticas das pessoas de sucesso."
            },
            {
                id: 34,
                title: "Dinheiro Extra Criativo",
                description: "Fazer um dinheiro extra de forma criativa.",
                details: "Voc√™ vai fazer um dinheiro extra usando sua criatividade para desenvolver suas habilidades empreendedoras.",
                links: [
                    { text: "üòÑ O que mudou entre 1990 e hoje", url: "http://rna.to/1oTJ7qW" }
                ]
            },
            {
                id: 35,
                title: "Verdades sobre o Tempo",
                description: "Entender as verdades sobre o tempo e aprender a respeit√°-lo.",
                details: "Voc√™ vai meditar sobre textos importantes sobre o tempo e assistir a um v√≠deo que mudar√° sua perspectiva sobre como usar o tempo.",
                links: [
                    { text: "üé• Coisas que voc√™ n√£o sabia sobre o tempo", url: "http://rna.to/1n7mgle" }
                ]
            },
            {
                id: 36,
                title: "Surpresa para a Mulher Amada",
                description: "Fazer uma surpresa agrad√°vel para a mulher que voc√™ ama.",
                details: "Voc√™ vai planejar e fazer uma surpresa agrad√°vel para a mulher especial em sua vida, seja esposa, m√£e, irm√£, filha ou namorada."
            },
            {
                id: 37,
                title: "Fazer o Certo Sem Vontade",
                description: "Aprender a fazer o que √© certo com ou sem vontade.",
                details: "Voc√™ vai desenvolver a habilidade de fazer o que √© certo mesmo quando n√£o tem vontade. Sentir vontade √© opcional para fazer o que √© certo.",
                links: [
                    { text: "üé• Princ√≠pio dos 5 minutos", url: "http://rna.to/1ogQho1" }
                ]
            },
            {
                id: 38,
                title: "Jejum de Daniel",
                description: "Fazer o Jejum de Daniel por 21 dias.",
                details: "Voc√™ vai fazer o Jejum de Daniel - um desafio de se desconectar do bombardeio de informa√ß√µes por 21 dias para focar no fortalecimento espiritual.",
                links: [
                    { text: "üìñ Explica√ß√£o completa do Jejum de Daniel", url: "http://rna.to/1kqo5a2" }
                ]
            },
            {
                id: 39,
                title: "Planejar o Dia",
                description: "Planejar o seu dia na noite anterior.",
                details: "Voc√™ vai tirar alguns minutos no final da noite para escrever uma lista das coisas principais que tem de fazer no dia seguinte."
            },
            {
                id: 40,
                title: "Buscar Ajuda",
                description: "Buscar ajuda.",
                details: "Voc√™ vai identificar uma √°rea onde precisa de ajuda e procurar quem pode ajud√°-lo. Admitir fraqueza √© sinal de for√ßa.",
                links: [
                    { text: "üìñ Sobre humildade e pedir ajuda", url: "http://rna.to/1r97JHb" }
                ]
            },
            {
                id: 41,
                title: "Oferecer Ajuda",
                description: "Oferecer ajuda a um homem que precise.",
                details: "Voc√™ vai identificar um homem que esteja precisando de ajuda e oferec√™-la da melhor forma que puder."
            },
            {
                id: 42,
                title: "Proibir Palavras Negativas",
                description: "Proibir-se de usar certas palavras negativas.",
                details: "Voc√™ vai identificar palavras negativas que costuma usar, proibir-se de us√°-las e substitu√≠-las por outras melhores."
            },
            {
                id: 43,
                title: "Gestos de Generosidade",
                description: "Praticar pelo menos tr√™s gestos de generosidade esta semana.",
                details: "Voc√™ vai fazer pelo menos tr√™s gestos de generosidade, sem interesse pessoal, simplesmente para fazer o bem a algu√©m. Todo IntelliMan √© generoso."
            },
            {
                id: 44,
                title: "Revis√£o e Leitura",
                description: "Rever os desafios desde o 27 at√© o 43 e fazer a leitura da semana.",
                details: "Chegou outro momento de reflex√£o. Voc√™ vai revisar desde o desafio 27 at√© o 43 e meditar em Hebreus 11 sobre homens corajosos da hist√≥ria."
            },
            {
                id: 45,
                title: "Dominar a Raiva",
                description: "Aprender a dominar a raiva e us√°-la a seu favor.",
                details: "Voc√™ vai aprender a dominar sua raiva e identificar a mensagem que ela traz. A raiva √© um sinal de que algo contrariou suas expectativas.",
                links: [
                    { text: "üìñ A origem da raiva", url: "http://rna.to/1hQTrMy" }
                ]
            },
            {
                id: 46,
                title: "Pornografia no C√©rebro",
                description: "Assistir ao v√≠deo 'Pornografia no C√©rebro'.",
                details: "Voc√™ vai assistir a um document√°rio sobre os danos da pornografia e se informar sobre este assunto que afeta muitos homens hoje.",
                links: [
                    { text: "üé• Document√°rio: Pornografia no C√©rebro", url: "http://rna.to/1paseJ1" }
                ]
            },
            {
                id: 47,
                title: "Bloquear Pornografia",
                description: "Bloquear a pornografia da sua vida e blindar-se contra ela.",
                details: "Voc√™ vai tomar medidas pr√°ticas para bloquear toda oportunidade de contato com pornografia e blindar-se contra ela.",
                links: [
                    { text: "üé• Por que os homens olham?", url: "http://rna.to/1sYM3AD" },
                    { text: "üé• Sobre dom√≠nio pr√≥prio", url: "http://rna.to/1oRUM65" }
                ]
            },
            {
                id: 48,
                title: "Vingar-se Fazendo o Bem",
                description: "Vingar-se do mal que lhe fez sofrer, fazendo o bem.",
                details: "Voc√™ vai identificar o mal que sofreu e decidir como se vingar√° desse mal fazendo o bem. Fa√ßa o diabo pagar caro!",
                links: [
                    { text: "üìñ Projetos do autor", url: "http://rna.to/1xNzrPq" }
                ]
            },
            {
                id: 49,
                title: "Assumir Erros",
                description: "Assumir seus erros e pedir desculpas.",
                details: "Voc√™ vai reconhecer seus erros, assumi-los e pedir desculpas a quem deve. Ser homem inteligente √© saber que n√£o sabe tudo."
            },
            {
                id: 50,
                title: "Sair com Parceiro",
                description: "Sair com seu parceiro oficial para curtirem alguma atividade juntos.",
                details: "Voc√™ vai tirar um tempo para fazer algo que voc√™s dois gostem. Homens precisam de amigos que sejam influ√™ncia positiva."
            },
            {
                id: 51,
                title: "Influ√™ncias nas Decis√µes",
                description: "Entender como suas decis√µes s√£o influenciadas e ficar mais atento a isso.",
                details: "Voc√™ vai assistir a uma palestra sobre como nossas decis√µes s√£o influenciadas e aprender a ficar mais atento a essas influ√™ncias.",
                links: [
                    { text: "üé• Palestra de Dan Ariely sobre decis√µes", url: "http://rna.to/1pnvm1X" }
                ]
            },
            {
                id: 52,
                title: "Encontro com Homens",
                description: "Organizar um encontro com homens para falar do IntelliMen.",
                details: "Voc√™ vai organizar um encontro para falar sobre como o projeto o tem ajudado e motivar outros homens a participar."
            },
            {
                id: 53,
                title: "Revis√£o Final",
                description: "Certificar-se de ter cumprido todos os 52 desafios. Todos.",
                details: "Voc√™ vai revisar rigorosamente todos os desafios para garantir que cumpriu todos √† risca. Miss√£o dada √© miss√£o cumprida. Um IntelliMan √© um homem inteligente que termina o que come√ßou."
            }
        ];

        // Fun√ß√µes de autentica√ß√£o integradas com backend
        function showAuthForm(formType) {
            document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));
            
            document.querySelector(`[onclick="showAuthForm('${formType}')"]`).classList.add('active');
            document.getElementById(formType + 'Form').classList.add('active');
        }

        async function register(event) {
            event.preventDefault();
            
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const partner = document.getElementById('registerPartner').value;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ name, email, password, partner })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    alert('Cadastro realizado com sucesso!');
                    showAuthForm('login');
                    // Limpar formul√°rio
                    document.getElementById('registerForm').reset();
                } else {
                    alert(data.error || 'Erro ao cadastrar usu√°rio');
                }
            } catch (error) {
                console.error('Erro na requisi√ß√£o:', error);
                alert('Erro de conex√£o. Tente novamente.');
            }
        }

        async function login(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    // Salvar token no localStorage
                    localStorage.setItem('token', data.token);
                    currentUser = data.user;
                    showDashboard();
                } else {
                    alert(data.error || 'Email ou senha incorretos');
                }
            } catch (error) {
                console.error('Erro na requisi√ß√£o:', error);
                alert('Erro de conex√£o. Tente novamente.');
            }
        }

        function logout() {
            // Limpar token
            localStorage.removeItem('token');
            currentUser = null;
            document.getElementById('authSection').style.display = 'block';
            document.getElementById('dashboard').classList.remove('active');
        }

        function showDashboard() {
            document.getElementById('authSection').style.display = 'none';
            document.getElementById('dashboard').classList.add('active');
            
            // Atualizar informa√ß√µes do usu√°rio
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('partnerName').textContent = currentUser.partner || 'N√£o definido';
            
            loadChallenges();
            updateProgress();
        }

        // Fun√ß√£o para carregar desafios do backend
        async function loadChallenges() {
            const grid = document.getElementById('challengesGrid');
            grid.innerHTML = '<div class="loading">Carregando desafios...</div>';
            
            try {
                const token = localStorage.getItem('token');
                const response = await fetch(`${API_BASE_URL}/api/progress`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const progress = await response.json();
                    renderChallenges(progress);
                } else if (response.status === 401) {
                    // Token inv√°lido, fazer logout
                    logout();
                    alert('Sess√£o expirada. Fa√ßa login novamente.');
                } else {
                    throw new Error('Erro ao carregar progresso');
                }
            } catch (error) {
                console.error('Erro ao carregar desafios:', error);
                grid.innerHTML = '<div style="text-align: center; padding: 40px; color: red;">Erro ao carregar desafios. Tente atualizar a p√°gina.</div>';
            }
        }

        function renderChallenges(progressData) {
            const grid = document.getElementById('challengesGrid');
            grid.innerHTML = '';
            
            // Converter array de progresso em objeto para facilitar busca
            const progressMap = {};
            progressData.forEach(p => {
                progressMap[p.challenge_id] = p;
            });
            
            challenges.forEach(challenge => {
                const progress = progressMap[challenge.id];
                const isCompleted = progress && progress.completed;
                
                const card = document.createElement('div');
                card.className = `challenge-card ${isCompleted ? 'completed' : ''}`;
                card.onclick = () => openChallengeModal(challenge, progress);
                
                let linksHtml = '';
                if (challenge.links && challenge.links.length > 0) {
                    linksHtml = `
                        <div class="challenge-links">
                            ${challenge.links.map(link => 
                                `<a href="${link.url}" target="_blank" onclick="event.stopPropagation()">${link.text}</a>`
                            ).join('')}
                        </div>
                    `;
                }
                
                card.innerHTML = `
                    <div class="challenge-header">
                        <span class="challenge-number">#${challenge.id}</span>
                        <span class="challenge-status ${isCompleted ? 'completed' : 'pending'}">
                            ${isCompleted ? 'Conclu√≠do' : 'Pendente'}
                        </span>
                    </div>
                    <div class="challenge-title">${challenge.title}</div>
                    <div class="challenge-description">${challenge.description}</div>
                    ${linksHtml}
                `;
                
                grid.appendChild(card);
            });
        }

        function openChallengeModal(challenge, progress) {
            document.getElementById('modalTitle').innerHTML = `
                <div class="logo-icon">IM</div>
                Desafio #${challenge.id}: ${challenge.title}
            `;
            
            let linksHtml = '';
            if (challenge.links && challenge.links.length > 0) {
                linksHtml = `
                    <hr style="margin: 20px 0;">
                    <p><strong>Links √∫teis:</strong></p>
                    <div class="challenge-links">
                        ${challenge.links.map(link => 
                            `<a href="${link.url}" target="_blank">${link.text}</a>`
                        ).join('')}
                    </div>
                `;
            }
            
            document.getElementById('modalContent').innerHTML = `
                <p><strong>Descri√ß√£o:</strong> ${challenge.description}</p>
                <hr style="margin: 20px 0;">
                <p><strong>Detalhes:</strong></p>
                <p>${challenge.details}</p>
                ${linksHtml}
            `;
            
            // Carregar anota√ß√µes existentes
            const notes = progress ? progress.notes || '' : '';
            document.getElementById('challengeNotes').value = notes;
            
            // Configurar bot√£o de conclus√£o
            const completeBtn = document.querySelector('.complete-btn');
            completeBtn.textContent = progress && progress.completed 
                ? 'Atualizar Anota√ß√µes' 
                : 'Salvar e Marcar como Conclu√≠do';
            completeBtn.onclick = () => completeChallenge(challenge.id);
            
            document.getElementById('challengeModal').classList.add('active');
        }

        async function completeChallenge(challengeId) {
            const notes = document.getElementById('challengeNotes').value;
            const token = localStorage.getItem('token');
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/progress/${challengeId}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        completed: true,
                        notes: notes
                    })
                });
                
                if (response.ok) {
                    alert('Desafio atualizado com sucesso!');
                    closeModal();
                    loadChallenges();
                    updateProgress();
                } else if (response.status === 401) {
                    logout();
                    alert('Sess√£o expirada. Fa√ßa login novamente.');
                } else {
                    const data = await response.json();
                    alert(data.error || 'Erro ao salvar desafio');
                }
            } catch (error) {
                console.error('Erro ao salvar desafio:', error);
                alert('Erro de conex√£o. Tente novamente.');
            }
        }

        async function updateProgress() {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch(`${API_BASE_URL}/api/progress`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const progress = await response.json();
                    const completed = progress.filter(p => p.completed).length;
                    const total = challenges.length;
                    const percentage = (completed / total) * 100;
                    
                    document.getElementById('progressFill').style.width = percentage + '%';
                    document.getElementById('progressText').textContent = `${completed}/${total}`;
                }
            } catch (error) {
                console.error('Erro ao atualizar progresso:', error);
            }
        }

        // Fun√ß√£o para exportar progresso integrada com backend
        async function exportProgress() {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch(`${API_BASE_URL}/api/progress`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Erro ao buscar progresso');
                }
                
                const progressData = await response.json();
                const completed = progressData.filter(p => p.completed).length;
                const completionPercentage = ((completed/53)*100).toFixed(1);
                
                // Criar conte√∫do em Markdown
                let exportText = `# üìä RELAT√ìRIO DE PROGRESSO - INTELLIMEN\n\n`;
                
                exportText += `## üë§ Dados do Participante\n\n`;
                exportText += `- **Nome:** ${currentUser.name}\n`;
                exportText += `- **Email:** ${currentUser.email}\n`;
                exportText += `- **Parceiro Oficial:** ${currentUser.partner || 'N√£o definido'}\n`;
                exportText += `- **Data do Relat√≥rio:** ${new Date().toLocaleDateString('pt-BR')}\n\n`;
                
                exportText += `## üìà Resumo do Progresso\n\n`;
                exportText += `> **${completed}/53 desafios conclu√≠dos (${completionPercentage}%)**\n\n`;
                
                // Barra de progresso visual em texto
                const progressBar = '‚ñà'.repeat(Math.floor(completed/53 * 20)) + '‚ñë'.repeat(20 - Math.floor(completed/53 * 20));
                exportText += `\`\`\`\n${progressBar} ${completionPercentage}%\n\`\`\`\n\n`;
                
                if (completed > 0) {
                    exportText += `## ‚úÖ Desafios Conclu√≠dos\n\n`;
                    
                    challenges.forEach(challenge => {
                        const progress = progressData.find(p => p.challenge_id === challenge.id && p.completed);
                        if (progress) {
                            exportText += `### ${challenge.id}. ${challenge.title}\n\n`;
                            exportText += `- **Status:** ‚úÖ *Conclu√≠do*\n`;
                            exportText += `- **Data de Conclus√£o:** ${new Date(progress.completed_at).toLocaleDateString('pt-BR')}\n`;
                            
                            if (progress.notes && progress.notes.trim()) {
                                exportText += `- **Anota√ß√µes:**\n  > ${progress.notes.replace(/\n/g, '\n  > ')}\n`;
                            }
                            exportText += `\n---\n\n`;
                        }
                    });
                }
                
                const pendingChallenges = challenges.filter(challenge => 
                    !progressData.find(p => p.challenge_id === challenge.id && p.completed)
                );
                
                if (pendingChallenges.length > 0) {
                    exportText += `## ‚è≥ Desafios Pendentes\n\n`;
                    exportText += `*${pendingChallenges.length} desafios restantes para completar o projeto:*\n\n`;
                    
                    pendingChallenges.forEach(challenge => {
                        exportText += `- [ ] **Desafio #${challenge.id}:** ${challenge.title}\n`;
                    });
                    exportText += `\n`;
                }
                
                exportText += `## üéØ Lema do IntelliMan\n\n`;
                exportText += `> *"Um IntelliMan √© um homem inteligente. Ele vence a si mesmo, honra sua mulher e ajuda o seu parceiro. Se √© dif√≠cil, ele supera. Se √© assustador, ele enfrenta. Se demora, ele persevera. Conhece o seu valor diante dos homens e de Deus. Ama a disciplina, o car√°ter e o bem. Sua miss√£o √© inspirar outros a se tornarem IntelliMen."*\n\n`;
                
                exportText += `---\n\n`;
                exportText += `*Este relat√≥rio foi gerado automaticamente pelo sistema IntelliMen em ${new Date().toLocaleString('pt-BR')}*\n`;
                
                // Criar e baixar arquivo
                const blob = new Blob([exportText], { type: 'text/markdown;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `intellimen_relatorio_${currentUser.name.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.md`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                alert('üìÑ Relat√≥rio exportado com sucesso!');
                
            } catch (error) {
                console.error('Erro ao exportar progresso:', error);
                alert('Erro ao exportar relat√≥rio. Tente novamente.');
            }
        }

        function openProfileModal() {
            // Carregar dados atuais do usu√°rio
            document.getElementById('profileName').value = currentUser.name;
            document.getElementById('profileEmail').value = currentUser.email;
            document.getElementById('profilePartner').value = currentUser.partner || '';
            
            // Carregar estat√≠sticas
            loadProfileStats();
            
            document.getElementById('profileModal').classList.add('active');
        }

        function closeProfileModal() {
            document.getElementById('profileModal').classList.remove('active');
        }

        async function updateProfile(event) {
            event.preventDefault();
            
            const name = document.getElementById('profileName').value;
            const partner = document.getElementById('profilePartner').value;
            const token = localStorage.getItem('token');
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/user`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ name, partner })
                });
                
                if (response.ok) {
                    // Atualizar dados locais
                    currentUser.name = name;
                    currentUser.partner = partner;
                    
                    // Atualizar interface
                    document.getElementById('userName').textContent = name;
                    document.getElementById('partnerName').textContent = partner || 'N√£o definido';
                    
                    alert('‚úÖ Perfil atualizado com sucesso!');
                    closeProfileModal();
                } else if (response.status === 401) {
                    logout();
                    alert('Sess√£o expirada. Fa√ßa login novamente.');
                } else {
                    const data = await response.json();
                    alert(data.error || 'Erro ao atualizar perfil');
                }
            } catch (error) {
                console.error('Erro ao atualizar perfil:', error);
                alert('Erro de conex√£o. Tente novamente.');
            }
        }

        async function loadProfileStats() {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch(`${API_BASE_URL}/api/progress`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const progress = await response.json();
                    const completed = progress.filter(p => p.completed).length;
                    const total = challenges.length;
                    const percentage = ((completed / total) * 100).toFixed(1);
                    
                    // Calcular data de in√≠cio (primeira atividade)
                    const firstActivity = progress.find(p => p.completed);
                    const startDate = firstActivity ? new Date(firstActivity.completed_at).toLocaleDateString('pt-BR') : 'Ainda n√£o iniciado';
                    
                    // Calcular desafios por semana (√∫ltimas 4 semanas)
                    const fourWeeksAgo = new Date();
                    fourWeeksAgo.setDate(fourWeeksAgo.getDate() - 28);
                    const recentChallenges = progress.filter(p => 
                        p.completed && new Date(p.completed_at) >= fourWeeksAgo
                    ).length;
                    
                    document.getElementById('profileStats').innerHTML = `
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #000;">${completed}</div>
                                <div style="color: #666;">Desafios Conclu√≠dos</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #000;">${percentage}%</div>
                                <div style="color: #666;">Progresso Total</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #000;">${recentChallenges}</div>
                                <div style="color: #666;">√öltimas 4 Semanas</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.2rem; font-weight: bold; color: #000;">${startDate}</div>
                                <div style="color: #666;">Data de In√≠cio</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; padding: 15px; background: white; border-radius: 8px;">
                            <h4 style="margin-bottom: 10px;">üèÜ N√≠vel IntelliMan</h4>
                            ${getIntelliManLevel(completed)}
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Erro ao carregar estat√≠sticas:', error);
                document.getElementById('profileStats').innerHTML = '<p style="color: red;">Erro ao carregar estat√≠sticas</p>';
            }
        }

        function getIntelliManLevel(completed) {
            if (completed >= 50) {
                return '<div style="color: #d4af37; font-weight: bold;">üåü INTELLIMAN TOP 5 - Liga dos Melhores!</div>';
            } else if (completed >= 30) {
                return '<div style="color: #cd7f32; font-weight: bold;">üî• INTELLIMAN FERA - Voc√™ √© fera!</div>';
            } else if (completed >= 15) {
                return '<div style="color: #c0c0c0; font-weight: bold;">üí™ INTELLIMAN ESFOR√áADO - Valeu o esfor√ßo!</div>';
            } else if (completed >= 5) {
                return '<div style="color: #8b4513; font-weight: bold;">üéØ INTELLIMAN B√ÅSICO - Pelo menos voc√™ tentou!</div>';
            } else {
                return '<div style="color: #666;">üìö INICIANTE - Continue se esfor√ßando!</div>';
            }
        }

        function changePassword() {
            const newPassword = prompt('Digite sua nova senha:');
            if (newPassword && newPassword.length >= 6) {
                // Aqui voc√™ implementaria a mudan√ßa de senha via API
                alert('‚ö†Ô∏è Funcionalidade em desenvolvimento. Por enquanto, entre em contato com o suporte.');
            } else if (newPassword) {
                alert('A senha deve ter pelo menos 6 caracteres.');
            }
        }

        async function resetProgress() {
            const confirm1 = confirm('‚ö†Ô∏è ATEN√á√ÉO: Esta a√ß√£o ir√° DELETAR TODO seu progresso no IntelliMen!\n\nTodos os desafios conclu√≠dos e anota√ß√µes ser√£o perdidos permanentemente.\n\nTem certeza que deseja continuar?');
            
            if (confirm1) {
                const confirm2 = confirm('üö® √öLTIMA CHANCE!\n\nEsta √© sua √∫ltima oportunidade de desistir.\n\nSe continuar, TODO seu progresso ser√° PERDIDO PARA SEMPRE.\n\nConfirma a exclus√£o de todos os dados?');
                
                if (confirm2) {
                    const finalConfirm = prompt('Para confirmar, digite "DELETAR TUDO" (sem aspas):');
                    
                    if (finalConfirm === 'DELETAR TUDO') {
                        try {
                            const token = localStorage.getItem('token');
                            // Aqui voc√™ implementaria a exclus√£o via API
                            // Por enquanto, vamos simular
                            alert('üóëÔ∏è Todo o progresso foi resetado!\n\nVoc√™ pode come√ßar os desafios novamente.');
                            closeProfileModal();
                            loadChallenges();
                            updateProgress();
                        } catch (error) {
                            alert('Erro ao resetar progresso. Tente novamente.');
                        }
                    } else {
                        alert('Cancelado. Seu progresso est√° seguro! üòÖ');
                    }
                }
            }
        }

        function openManifestoModal() {
            document.getElementById('manifestoModal').classList.add('active');
        }

        function closeManifestoModal() {
            document.getElementById('manifestoModal').classList.remove('active');
        }

        function closeModal() {
            document.getElementById('challengeModal').classList.remove('active');
        }

        // Fechar modal ao clicar fora
        window.onclick = function(event) {
            const challengeModal = document.getElementById('challengeModal');
            const manifestoModal = document.getElementById('manifestoModal');
            const profileModal = document.getElementById('profileModal');
            
            if (event.target === challengeModal) {
                closeModal();
            }
            if (event.target === manifestoModal) {
                closeManifestoModal();
            }
            if (event.target === profileModal) {
                closeProfileModal();
            }
        }

        // Verificar se usu√°rio est√° logado ao carregar a p√°gina
        window.onload = async function() {
            const token = localStorage.getItem('token');
            
            if (token) {
                try {
                    // Verificar se o token √© v√°lido obtendo dados do usu√°rio
                    const response = await fetch(`${API_BASE_URL}/api/user`, {
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    });
                    
                    if (response.ok) {
                        const userData = await response.json();
                        currentUser = userData;
                        showDashboard();
                    } else {
                        // Token inv√°lido, remover
                        localStorage.removeItem('token');
                    }
                } catch (error) {
                    console.error('Erro ao verificar autentica√ß√£o:', error);
                    localStorage.removeItem('token');
                }
            }
        }
    </script>
</body>
</html>>